import React, { useEffect, useRef } from "react";
import { View, StyleSheet, Animated } from "react-native";
import Svg, { Path, G } from "react-native-svg";

export default function LoadingIcon({
  width = 150,
  height = 150,
  color = "#252525",
}) {
  // Create a reference for the animated value
  const scaleAnim = useRef(new Animated.Value(1)).current;

  // Function to start the pulsing animation
  const startPulse = () => {
    // Create a continuous loop of pulsing animation
    Animated.loop(
      Animated.sequence([
        Animated.timing(scaleAnim, {
          toValue: 1.15, // Scale up to 120%
          duration: 800, // Duration of scaling up
          useNativeDriver: true, // Enable native driver for better performance
        }),
        Animated.timing(scaleAnim, {
          toValue: 1, // Scale back to original size
          duration: 800, // Duration of scaling down
          useNativeDriver: true,
        }),
      ])
    ).start();
  };

  // Start the animation when the component mounts
  useEffect(() => {
    startPulse();
  }, []);

  return (
    <View style={styles.container}>
      {/* Use the Animated.View wrapper to apply animation */}
      <Animated.View style={{ transform: [{ scale: scaleAnim }] }}>
        <Svg width={width} height={height} viewBox="0 0 5000 5000">
          <G
            transform="translate(0.000000,4096.000000) scale(0.100000,-0.100000)"
            fill={color}
            stroke="none"
          >
            <Path d="M19735 35850 c-1860 -87 -3600 -433 -5355 -1067 -1790 -646 -3533 -1602 -4955 -2717 -410 -321 -762 -632 -1111 -980 -293 -294 -314 -323 -314 -431 0 -78 12 -113 66 -196 197 -299 679 -505 1434 -613 516 -74 1000 -101 2065 -116 1255 -16 1387 -22 1577 -65 1035 -237 1822 -751 2334 -1525 312 -472 504 -1009 590 -1652 25 -187 30 -599 9 -828 -19 -211 -16 -371 10 -558 148 -1058 1055 -1924 2530 -2417 1321 -441 2936 -499 4000 -143 388 129 677 299 895 524 84 87 113 127 235 329 738 1222 1490 2114 2290 2715 536 403 1091 658 1635 751 177 30 519 37 683 15 163 -23 326 -66 460 -121 343 -141 803 -324 1027 -408 1255 -469 2266 -728 3160 -809 207 -18 675 -16 850 5 738 89 1250 369 1574 861 72 109 175 319 211 431 47 144 44 155 -173 515 -475 792 -1097 1633 -1788 2420 -504 574 -1153 1222 -1744 1741 -2380 2087 -5215 3485 -8210 4048 -762 144 -1421 223 -2325 282 -213 13 -1418 20 -1660 9z" />
            <Path d="M9275 26520 c-1282 -80 -3484 -627 -4749 -1180 -146 -64 -178 -83 -243 -150 -69 -70 -97 -126 -212 -422 -741 -1904 -1201 -3833 -1350 -5668 -42 -509 -46 -625 -46 -1270 0 -650 5 -781 46 -1200 34 -353 102 -779 154 -970 8 -30 27 -138 41 -240 395 -2875 1764 -5608 4014 -8015 227 -242 763 -773 990 -979 464 -423 973 -847 1077 -900 167 -84 378 -45 503 91 27 29 91 117 143 196 480 721 738 1516 714 2197 -7 197 -27 338 -73 520 -85 332 -224 593 -488 915 -574 700 -853 1209 -906 1650 -34 288 72 576 266 724 79 59 374 208 546 275 359 139 871 286 1433 411 278 62 350 83 445 130 232 117 421 322 560 610 125 257 192 503 237 865 25 200 24 709 0 925 -47 407 -128 759 -247 1082 -109 293 -122 330 -155 457 -74 279 -108 556 -107 876 0 371 43 703 143 1105 61 246 89 337 240 785 151 450 169 516 169 631 0 107 -21 162 -90 231 -90 90 -167 105 -346 68 -502 -104 -1070 -155 -1471 -132 -259 15 -441 41 -652 93 -333 82 -578 189 -965 422 -193 116 -300 208 -385 331 -135 196 -198 449 -172 695 31 297 133 526 315 706 134 133 235 181 431 205 508 62 1011 197 1328 355 409 205 646 471 795 895 65 183 191 582 218 687 86 341 96 660 28 915 -26 96 -100 262 -150 335 -151 219 -377 390 -686 517 -196 81 -554 181 -751 210 -131 20 -410 27 -592 16z" />
            <Path d="M33012 22015 c-141 -31 -317 -126 -496 -269 -124 -99 -189 -157 -488 -433 -591 -546 -909 -786 -1348 -1013 -360 -186 -738 -458 -995 -715 -492 -491 -715 -1049 -691 -1735 16 -491 150 -1005 422 -1616 197 -444 540 -1054 855 -1519 93 -138 134 -227 174 -377 144 -546 119 -1331 -65 -2046 -148 -571 -381 -1062 -689 -1452 -115 -144 -343 -368 -481 -472 -160 -119 -259 -178 -530 -311 -326 -161 -612 -330 -885 -525 -1276 -910 -2316 -2296 -2435 -3247 -17 -131 -8 -336 19 -440 11 -44 43 -125 70 -181 174 -351 581 -516 1146 -464 207 20 370 52 760 150 714 181 1132 255 1640 291 215 15 665 7 833 -15 424 -56 760 -173 974 -338 196 -152 333 -199 490 -169 89 18 140 46 312 174 901 673 1881 1601 2708 2564 549 639 1042 1303 1346 1809 997 1662 1712 3949 2101 6724 57 406 111 873 111 958 0 90 -28 181 -105 337 -88 179 -164 285 -304 425 -280 280 -543 397 -1226 550 -474 105 -681 168 -895 271 -306 147 -519 336 -719 636 -174 260 -285 522 -425 1003 -158 542 -336 952 -506 1163 -191 238 -428 336 -678 282z" />
            <Path d="M18510 18929 c-391 -42 -676 -159 -865 -353 -84 -87 -132 -158 -171 -254 -58 -144 -57 -129 -59 -762 -7 -1664 -168 -3220 -485 -4680 -133 -610 -179 -1017 -167 -1480 14 -569 115 -1012 322 -1420 112 -219 235 -391 378 -526 100 -96 155 -136 342 -249 447 -271 887 -423 1375 -476 147 -15 490 -15 645 0 993 101 2050 637 2841 1442 168 171 242 266 347 444 478 807 645 2275 456 4005 -57 523 -147 993 -240 1251 -52 148 -84 310 -109 559 -11 113 -27 277 -36 365 -30 309 -72 483 -159 662 -41 83 -71 129 -116 177 -275 295 -996 634 -2007 946 -575 177 -1038 280 -1502 336 -159 19 -662 27 -790 13z" />
          </G>
        </Svg>
      </Animated.View>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: "center", // Center vertically
    alignItems: "center", // Center horizontally
    paddingLeft: 32,
  },
});
